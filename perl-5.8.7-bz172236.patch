--- perl-5.8.7/utils/h2ph.PL.bz172236	2005-04-04 17:47:17.000000000 -0400
+++ perl-5.8.7/utils/h2ph.PL	2005-11-01 17:42:36.000000000 -0500
@@ -734,9 +734,15 @@
 # non-GCC?) C compilers, but gcc uses an additional include directory.
 sub inc_dirs
 {
-    my $from_gcc    = `$Config{cc} -v 2>&1`;
-    $from_gcc       =~ s:^Reading specs from (.*?)/specs\b.*:$1/include:s;
-
+    my $from_gcc    = `LC_ALL=C $Config{cc} -v 2>&1`;
+    if( !( $from_gcc =~ s:^Reading specs from (.*?)/specs\b.*:$1/include:s ) )
+    { # gcc-4+ :
+	$from_gcc   = `LC_ALL=C $Config{cc} -print-search-dirs 2>&1`;
+	if ( !($from_gcc =~ s/^install:\s*([^\s]+[^\s\/])([\s\/]*).*$/$1\/include/s) )
+	{
+	    $from_gcc = '';
+	};
+    };
     length($from_gcc) ? ($from_gcc, $Config{usrinc}) : ($Config{usrinc});
 }
 
